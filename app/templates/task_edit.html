{% extends "base.html" %}
{% block title %}Edit task{% endblock %}

{% block content %}
  <p><a href="{{ url_for('tasks.week_view') }}">‚Üê Back to week</a></p>

  <h2>Edit task</h2>

  <form method="post">
    <label>
      Title:
      <input type="text" name="title" value="{{ task.title }}" required>
    </label>
    <br><br>

    <label>
      Planned for:
      <input type="date" name="planned_for" value="{{ task.planned_for.isoformat() if task.planned_for else '' }}" required>
    </label>
    <br><br>

    <label>
      Type:
      <select name="task_type">
        {% for key, label in task_types %}
          <option value="{{ key }}" {% if (task.task_type or 'MUST')==key %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
    </label>
    <br><br>

    <label>
      Goal:
      <select name="goal_id" required>
        {% for g in goals %}
          <option value="{{ g.id }}" {% if g.id==task.goal_id %}selected{% endif %}>{{ g.title }}</option>
        {% endfor %}
      </select>
    </label>
    <br><br>

    <label>
      Due date:
      <input type="date" name="due_date" value="{{ task.due_date.isoformat() if task.due_date else '' }}">
    </label>
    <br><br>

    <button type="submit">Save</button>
  </form>
{% endblock %}
