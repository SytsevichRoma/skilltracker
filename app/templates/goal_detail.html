{% extends "base.html" %}
{% block title %}{{ goal.title }}{% endblock %}

{% block content %}
  <p>
    <a href="{{ url_for('goals.list_goals') }}">‚Üê Back to goals</a> |
    <a href="{{ url_for('auth.logout') }}">Logout</a>
  </p>

  <h2>{{ goal.title }}</h2>
  {% if goal.description %}
    <p>{{ goal.description }}</p>
  {% endif %}

  <form method="post" action="{{ url_for('goals.delete_goal', goal_id=goal.id) }}"
        onsubmit="return confirm('–¢–æ—á–Ω–æ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü—ñ–ª—å —ñ –≤—Å—ñ –∑–∞–¥–∞—á—ñ?');">
    <button type="submit">Delete goal üóëÔ∏è</button>
  </form>

  <hr>

  <h3>Tasks</h3>

  <form method="post" action="{{ url_for('tasks.create_task') }}">
    <input type="hidden" name="goal_id" value="{{ goal.id }}">
    <input type="text" name="title" placeholder="New task..." required>
    <button type="submit">Add</button>
  </form>

  <br>

  {% if tasks %}
    <ul>
      {% for t in tasks %}
        <li>
          {% if t.is_done %}‚úÖ{% else %}‚è≥{% endif %}
          {{ t.title }}

          <form method="post" action="{{ url_for('tasks.toggle_task', task_id=t.id) }}" style="display:inline;">
            <button type="submit">Toggle</button>
          </form>

          <form method="post" action="{{ url_for('tasks.delete_task', task_id=t.id) }}"
                style="display:inline;" onsubmit="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–¥–∞—á—É?');">
            <button type="submit">Delete</button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No tasks yet</p>
  {% endif %}
{% endblock %}
